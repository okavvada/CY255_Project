# Import existing Mapzen basemap
# See additional basemaps at https://mapzen.com/documentation/mapzen-js/api-reference/#basemap-styles
import: https://mapzen.com/carto/zinc-style/4/zinc-style.yaml

sources:
    polygons_in_polls:
        type: GeoJSON
        url: https://gist.githubusercontent.com/okavvada/926f667c6a0a20acc689df75147e8ec4/raw/b69a12d0317067e4e6f2a2c349e21b5f215c5a25/tabblocks_water.geojson

styles:
    choropleth:
        base: polygons
        blend: multiply

layers:
    my_data_viz:
        data: { source: polygons_in_polls}
        draw:
            choropleth:
                order: global.sdk_order_under_roads_0
                color: |
                    function() {
                        var count = feature.total_water;
                        var OrRd = ['fef0d9', 'fdcc8a', 'fc8d59', 'e34a33'];
                        var color =
                        count = 0 ? '000' :
                        count < 0.002 ? OrRd[0] :
                        count < 0.02 ? OrRd[1] :
                        count < 0.2 ? OrRd[2] :
                        OrRd[3] ;
                        return "#" + color;
                    }